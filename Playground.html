<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Timeline Playground</title>


    <script src="Source.js"></script>

    <style>
        #timelineCanvas {
            //margin: auto;
            height: 90vh;
            width: 90vw;
            max-height: 600px;
            max-width: 800px;
        }
    </style>
</head>
<body>



<canvas id="timelineCanvas" style="border:1px solid #000000;"></canvas>


<br/>
<br/>
<label for="newTitleField">Title</label>
<input id="newTitleField" type="text"/>
<label for="newBodyField">Body</label>
<input id="newBodyField" type="text"/>
<label for="newDateField">Date (optional)</label>
<input id="newDateField" type="text"/>
<button id="newEventButton">Add new event</button>
<br/>
<br/>
<label for="deleteField">Title</label>
<input id="deleteField" type="text"/>
<button id="deleteEventButton">Delete event</button>
<br/>
<br/>
<form id="configForm">
    <label for="eventCount">Event Count:</label>
    <input type="number" id="eventCount" name="eventCount" min="1" max="5" value="1">

    <label for="actualScale">Actual Scale:</label>
    <input type="checkbox" id="actualScale" name="actualScale">

    <label for="verticalLayout">Vertical Layout:</label>
    <input type="checkbox" id="verticalLayout" name="verticalLayout">

    <label for="padding">Padding:</label>
    <input type="number" id="padding" name="padding" min="0">

    <label for="drawDividerLine">Draw Divider Line:</label>
    <input type="checkbox" id="drawDividerLine" name="drawDividerLine">

    <label for="highlightColor">Highlight Color:</label>
    <input type="color" id="highlightColor" name="highlightColor">

    <label for="dateSort">Date Sort:</label>
    <input type="checkbox" id="dateSort" name="dateSort">

    <label for="metricDateFormat">Metric Date Format:</label>
    <input type="checkbox" id="metricDateFormat" name="metricDateFormat">

    <label for="metricTimeFormat">Metric Time Format:</label>
    <input type="checkbox" id="metricTimeFormat" name="metricTimeFormat">

    <label for="languageDateFormat">Language Date Format:</label>
    <input type="checkbox" id="languageDateFormat" name="languageDateFormat">

    <label for="layoutTechnique">Layout Technique:</label><br>
    <input type="radio" id="normal" name="layoutTechnique" value="normal">
    <label for="normal">Normal</label><br>
    <input type="radio" id="vertical" name="layoutTechnique" value="vertical">
    <label for="vertical">Vertical</label><br>
    <input type="radio" id="mixed" name="layoutTechnique" value="mixed">
    <label for="mixed">Mixed</label><br>

    <label for="resolutionScale">Resolution Scale:</label>
    <input type="number" id="resolutionScale" name="resolutionScale" min="1" max="5" value="1">

    <label for="maxFontSize">Max Font Size:</label>
    <input type="number" id="maxFontSize" name="maxFontSize" min="1">

    <label for="minFontSize">Min Font Size:</label>
    <input type="number" id="minFontSize" name="minFontSize" min="1">

    <label for="popupTime">Popup Time:</label>
    <input type="number" id="popupTime" name="popupTime" min="0">

    <button type="submit">Submit</button>
</form>




</body>
</html>










<script>
    const timeline = new Timeline(document.getElementById('timelineCanvas'));


    timeline.addEvent("Founding", "In 1971 the Hingerman Hot Dog corporation was founded, intending to compete with Frankfurt's Frankfurts by creating a monopoly 50 years before it's founding.","1971y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Merger", "In 1980 the Hingerman Hot Dog corporation merged with every other European food company West of the Iron Curtain.","1980y",
        "{\"de\" : \"Zusammenschluss\"}",
        "{\"de\" : \"1980 fusionierte die Hingerman Hot Dog Corporation mit allen anderen europäischen Lebensmittelunternehmen westlich des Eisernen Vorhangs.\"}");
    timeline.addEvent("Further acquisitions", "In February of 1981 the Iron Curtain fell over due to rusting, allowing Hingerman to purchase a large number of Soviet food produces.","1981y2m",
        "{\"de\" : \"Weitere Akquisitionen\"}",
        "{\"de\" : \"Im Februar 1981 fiel der Eiserne Vorhang aufgrund von Rost und ermöglichte Hingerman den Kauf einer großen Anzahl sowjetischer Lebensmittel.\"}");
    timeline.addEvent("Backpedaling", "In June of 1981 Hingerman sold all Soviet food producers back to Russia after realising they had no food to sell.","1981y6m",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("The Pig", "In 1982 the Pig catastrophe caused the near collapse of the Hingerman food corporation.","1982y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Collapse", "In 1985 the Hingerman food corporation completely collapsed, unable to recover from the Pig catastrophe.","1985y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Hingerman dies", "In 1992 Johann Hingerman fell deathly ill after contracting the bubonic plague. He died on February 30th, 1992.","1992y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Hingerman is born", "In 2007 Johann Hingerman was born.","2007y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Hingerman's Hot Dog Stand", "In 2009 Johann Hingerman opened a street stand selling his patented \"Brat Dog\" bratwurst hot dogs.","2009y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Frankfurt's Frankfurts", "In 2021 Franz Frankfurt began selling revolutionary hot dogs which spiked in popularity after he invented his signature technique of cooking the hotdogs by applying heat. It was far more popular than Hingerman's frozen hot dogs.","2021y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Tough competition", "By 2023 Frankfurt's Frankfurts made it's first billion Euros.","2023y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("An empire fallen", "In November of 2023, Hingerman filed for bankruptcy, unable to compete with Franz Frankfurt.","2023y11m",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");
    timeline.addEvent("Assassination", "In 2222 Johann Hingerman assassinating God King Franz Frankfurt and fled into the past, avoiding chase from time cops by paying them in a future which never happened.","2222y",
        "{\"de\" : \"Gruendung\"}",
        "{\"de\" : \"1971 wurde die Hingerman Hot Dog Corporation gegründet, mit der Absicht, 50 Jahre vor ihrer Gründung durch die Schaffung eines Monopols mit den Frankfurt's Frankfurtern zu konkurrieren.\"}");


    //TODO
    timeline.addEvent("A wise purchase", "Right now you buy a hotdog, oooh, you want a hot dog so bad. Eat hotdogs. Eat hotdogs. Eat hotdogs. Eat hotdogs.", new Date());




    document.getElementById("deleteEventButton").addEventListener("click", function() {
        timeline.removeEvent(document.getElementById("deleteField").value);
    });

    document.getElementById("newEventButton").addEventListener("click", function() {
        timeline.addEvent(document.getElementById("newTitleField").value, document.getElementById("newBodyField").value, document.getElementById("newDateField").value);
    });


    document.getElementById("configForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Prevent default form submission

        // Initialize empty configuration object
        let config = {};

        // Loop through form fields and add filled values to the config object
        Array.from(this.elements).forEach(function(element) {
            if (element.type !== "submit" && element.value.trim() !== "") {
                if (element.type === 'radio') {
                    if (element.checked) {
                        config[element.name] = element.value;
                    }
                }
                // For color picker input, get value from value attribute
                else if (element.type === "color") {
                    config[element.name] = element.value;
                } else {
                    config[element.name] = element.type === "checkbox" ? element.checked : parseInt(element.value);
                }
            }
        });


        // Reconfigure the timeline
        timeline.configure(JSON.stringify(config));

        // Reset the form fields
        autofillForm(timeline.timelineConfig);
    });




    //Some code to make sure the canvas is resized with the view
    window.addEventListener("resize", function() {
        console.log("Resized");
        const element = document.getElementById("timelineCanvas");

        element.style.height = outerHeight;
        element.style.width = outerWidth;

        timeline.resize();
    });



    function autofillForm() {
        const timelineConfig = timeline.timelineConfig;

        document.getElementById('eventCount').value = timelineConfig.eventCount;
        document.getElementById('actualScale').checked = timelineConfig.actualScale;
        document.getElementById('verticalLayout').checked = timelineConfig.verticalLayout;
        document.getElementById('padding').value = timelineConfig.padding;
        document.getElementById('drawDividerLine').checked = timelineConfig.drawDividerLine;
        document.getElementById('highlightColor').value = timelineConfig.highlightColor;
        document.getElementById('dateSort').checked = timelineConfig.dateSort;
        document.getElementById('metricDateFormat').checked = timelineConfig.metricDateFormat;
        document.getElementById('metricTimeFormat').checked = timelineConfig.metricTimeFormat;
        document.getElementById('languageDateFormat').checked = timelineConfig.languageDateFormat;
        document.querySelector(`input[name="layoutTechnique"][value="${timelineConfig.layoutTechnique}"]`).checked = true;
        document.getElementById('resolutionScale').value = timelineConfig.resolutionScale;
        document.getElementById('maxFontSize').value = timelineConfig.maxFontSize;
        document.getElementById('minFontSize').value = timelineConfig.minFontSize;
        document.getElementById('popupTime').value = timelineConfig.popupTime;
    }


    //Autofill with default values
    document.addEventListener('DOMContentLoaded', autofillForm);

</script>